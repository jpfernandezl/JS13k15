<!doctype html>
<meta charset=utf-8>
<title>GeoQuiz map editor</title>
<canvas id=C width=1020 height=500 style="background:url(a.png) no-repeat -5px -5px; background-size:1060px"></canvas>
<pre id=P></pre>
<style>*{margin:0}</style>
<script src=data.js></script>
<script>

/*
* This tool was made to draw easily the fronteers of all the world's countries.
* It prints JSON data corresponding to each country under the map.
* How to use:
* Click to place each point of the path. It appends 2 ASCII characters to the encoded path (one for pageX/4, one for pageY/2)
* Press space key to start drawing the next country
* Right click to insert a separation (for countries separated in many islands/parts), encoded by a "0".


http://codepen.io/subzey/pen/rVoXQx


*/

c=C.getContext("2d");


p = [
/* Cape Canaveral */ ',\\',
/* Christ the Redeemer */ 'H¬∫',
/* The Great Chinese Wall */ '√ÅI',
/* The Great Sphinx */ '¬ÉZ',
/* The Eiffel Tower */ 'm9',
/* Tower of Pisa */ 'sA',
/* Mount Everest */ '¬Æ\\',
/* Sagrada Familia */ 'lE',
/* Big Ben */ 'k2',
/* The Statue of Liberty */ '2J',
/* Forbidden City */ '√ÇI',
/* The Pyramids of Giza */ '¬ÉZ',
/* The Palace of Versailles */ 'm9',
/* Acropolis */ '}L',
/* Trevi Fountain */ 'uD',
/* Kremlin */ '¬Ö-',
/* Loch Ness */ 'i+',
/* Atomium */ 'n4',
/* Lascaux caves */ 'l>',
/* Mont St. Michel */ 'j7',
/* Piazza San Marco */ 't>',
/* The Grand Canyon */ 'O',
/* Millau Bridge */ 'm?',
/* Rock of Gibraltar */ 'gO',
/* The Empire State Building */ '4E',
/* Hollywood Sign */ 'Q',
/* Times square */ '3G',
/* Louvre Museum */ 'm9',
/* White House */ '1K',
/* Florence Cathedral */ 'sB',
/* Las Vegas */ 'O',
/* Madrid Palace */ 'hG',
/* Central Park */ '4F',
/* Sistine Chapel */ 'tC',
/* Piazza del Campo */ 'sA',

/* Machu Picchu */ '0¬ß',
/* The Burj al Arab Hotel */ '¬ïc',
/* St. Peter‚Äôs Cathedral */ 'uD',
/* Kilimanjaro */ '¬â¬ó',
/* Capitol Hill */ '1J',
/* Luxor Temple */ '¬Éa',
/* Golden Gate Bridge */ 'J',
/* Burj Khalifa */ '¬ñc',
/* Alcatraz */ 'L',
/* Ephesus */ 'K',
/* Manneken Pis */ 'n4',
/* Mount Eden crater */ '√Ø√î',
/* North Cape */ 'z',
/* St. Basil‚Äôs Cathedral */ '¬Ö-',
/* Victoria Falls */ '¬±',
/* The Great Buddha */ '√ïP',
/* Lotus Temple */ '¬ß\\',
/* The Colosseum */ 'uD',
/* Abu Simbel */ '¬Ég',
/* Petronas Twin Towers */ '¬º¬ã',
/* Yellowstone */ 'C',
/* Niagara Falls */ '1B',
/* The Taj Mahal */ '¬ß\\',
/* Mount Fuji */ '√îO',
/* Mecca */ '¬äg',
/* Auschwitz */ 'y4',
/* Stonehenge */ 'j3',
/* Mount Rushmore */ '@',
/* Pentagon */ '0K',
/* Cape of Good Hope */ 'y√ê',
/* Opera House */ '√û√è',
/* Parc Guell */ 'lE',
/* Pompeii */ 'vF',
/* Dead Sea */ '¬ÜW',

/* Waterloo */ 'n4',
/* Easter Island */ '√Ç',
/* Everglades */ '+a',
/* Cloud gate */ '*D',
/* Rialto Bridge */ 't>',
/* Willis Tower */ '*D',
/* Little mermaid */ 't,',
/* Tower Bridge */ 'k2',
/* The Blue Mosque */ '¬É[',
/* Nevado Mismi */ '1¬¨',
/* Table Mountain */ 'y√è',
/* Minaret of Jam */ '¬úR',
/* Angkor Wat */ '¬æx',
/* Faisal Mosque */ '¬üb',
/* Neuschwanstein castle */ 's8',
/* Golden Temple of Amritsar */ '¬ßW',
/* Al Aqsa Mosque */ '¬ÜU',
/* Temple of Besakih */ '√à¬°',
/* Chichen Itza */ '$k',
/* Bran Castle */ '}>',
/* Hagia Sophia */ '¬ÅF',
/* Uluru */ '√î¬Ω',
/* Brandenburg Gate */ 't2',
/* Blue Domed Church */ '~M',
/* Taal lake */ '√åv',
/* Cheyenne mountain */ 'M',
/* Kiyomizu-dera */ '√ìP',
/* Petra */ '¬ÜX',
/* Tombouctou */ 'hr',
/* Palace of Culture and Science */ 'z2'
];

sp=""; // current subpath

l=function(s){console.log(s)};

// Trace path
C.onclick = function(e){
    if(e.which==1){
        var x=String.fromCharCode(~~(e.pageX/4)).replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/</g,"&lt;");
        //l((e.pageX/4).toString(16));
        var y=String.fromCharCode(~~(e.pageY/2)).replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/</g,"&lt;");
        //l((e.pageY/2).toString(16));
        sp+=x;
        P.innerHTML+=x;
        sp+=y;
        P.innerHTML+=y;
        //l(x.charCodeAt(0));
        //l(y.charCodeAt(0));
    }
}

// Next point of path
W = 0;
currentside=0;
C.onmousemove=function(e){
    W+=1;
    W=W%220;
    
    C.width=C.width;
    c.strokeStyle="red";
    c.lineWidth="1";
    c.beginPath();
    //c.arc(230, 200, 200, 0, 7);
    c.stroke();
    
    var path, subpath;
    
    for(k=0;k<p.length;k++){
    
        path=p[k].split("√ø");
        for(i=0;i<path.length;i++){
            subpath = path[i].replace(/\\\\/g,"\\").replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\'/g,"'").replace(/&lt;/g,"<");
            c.beginPath();
            
            
            /*
            //c.moveTo(subpath.charCodeAt(0)*4+2-.1, subpath.charCodeAt(1)*2+1-.1);
            for(j=0;j<subpath.length;j+=2){
                x2= (subpath.charCodeAt(j) + W) / 110;
                y2= -(subpath.charCodeAt(j+1) - 120) / 150;

                while(x2>1){
                    x2-=2;
                }
                
                //l(x2);
                if(x2>-1&&x2<=-.5 && p[k]!= russia && p[k]!= canada)x2=-0.5;
                if(x2>.5&&x2<=1 && p[k]!= russia && p[k]!= canada)x2=0.5;
                

                if(!j && p[k]!= russia && p[k]!= canada){
                    if(x2 < 0) currentside = -.5;
                    if(x2 > 0) currentside = .5;
                }
                
                if(p[k]== russia){
                    currentside = -.5;
                    if(W>50)currentside = .5;
                    if(W>160)currentside = -.5;
                }
                
                if(p[k]== canada){
                    currentside = .5;
                    if(W>80)currentside = -.5;
                    if(W>180)currentside = .5;
                }
                if((x2 <= -.5 || x2 >= .5)){
                    x2 = currentside
                }
                
                //l(x2);
                //l(y2);
                x2 = Math.sin(x2 * Math.PI) * Math.cos(y2 * Math.PI / 2)
                y2 = Math.sin(-y2 * Math.PI/2)
                
                x2 = x2 * 100 + 100;
                y2 = y2 * 100 + 100;
                //if(!j) c.lineTo(x2*4+2, y2*2+1);
                //c.lineTo(x2*4+2, y2*2+1);
                
                if(!j) c.lineTo(x2*2+30, y2*2);
                c.lineTo(x2*2+30, y2*2);

            }
            c.closePath();
            c.fill();
            c.stroke();
            */
            
            
            c.moveTo(subpath.charCodeAt(0)*4+2-.1, subpath.charCodeAt(1)*2+1-.1);
            for(j=0;j<subpath.length;j+=2){
                x2=subpath.charCodeAt(j);
                y2=subpath.charCodeAt(j+1);
                c.lineTo(x2*4+2, y2*2+1);
            }
            c.closePath();
            c.fill();
            c.stroke();
            
            
            
        }
    
    }
    
    
    path=sp.split("√ø");
    for(i=0;i<path.length;i++){
        subpath = path[i].replace(/\\\\/g,"\\").replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\'/g,"'").replace(/&lt;/g,"<");
        c.moveTo(subpath.charCodeAt(0)*4+2-.1, subpath.charCodeAt(1)*2+1-.1);
        for(j=0;j<subpath.length;j+=2){
            x2=subpath.charCodeAt(j);
            y2=subpath.charCodeAt(j+1);
            c.lineTo(x2*4+2, y2*2+1);
        }
        c.stroke();
    }
    
    //c.lineTo(~~(e.pageX/4)*4+2, ~~(e.pageY/2)*2+1);
    c.stroke();
}

cca = function(s, c){
    return s.charCodeAt(c);
}

// Change path
onkeydown=function(e){
    if(e.keyCode== 32){
        p.push(sp);
        P.innerHTML+="',\n/* " + d[p.length] + " */ '";
        sp="";
    }
}

// Separate islands/parts of a country
C.oncontextmenu = function(e){
    sp+="√ø";
    P.innerHTML+="√ø";
    return false;
}

P.innerHTML= "/* " + d[p.length] + " */ '";

setInterval("C.onmousemove({pageX:0,pageY:0})", 20);


</script>